import { map } from 'rxjs/operators'
import { Injectable } from '@angular/core';
import { environment } from '../environments/environment'

import { HttpClient, HttpParams } from '@angular/common/http'
import { Http } from '@angular/http'

import { Observable, of } from 'rxjs'
import 'rxjs/Rx'

import { Usuario, PrecondicionesData, Mail } from './entities/usuario'

const USUARIO_API_URL = environment.usersApiUrl

@Injectable()
export class UsersService {

  foto: string = ""; //eliminar cuando este  implemantado en el servidor la foto

  constructor(private http: HttpClient) { }
  
  obtenerUsuario(uid:string): Observable<Usuario> {
    let apiUrl = `${USUARIO_API_URL}/usuarios/${uid}`;
    return this.http.get<Usuario>(apiUrl).pipe(map(u => new Usuario(u)));
  }

  actualizarUsuario(uid: string, usuario: Object): Observable<string> {
    /*
     * TODO: 
     * usuario {
          apellido:"Pais",
          ciudad:null,
          correos:(2) [{…}, {…}],
          direccion:null,        
          nombre:"Emanuel",
          pais:null,
          genero:"masculino",
          telefonoFijo:"448484",
          telefonoMovil:""
     * }
    */ 
   let apiUrl = `${USUARIO_API_URL}/usuarios/${uid}`;
   return this.http.post<any>(apiUrl, usuario);
  }

  obtenerAvatar(uid:string): Observable<string> {
    // let apiUrl = `${USUARIO_API_URL}/usuarios/${uid}/avatar/`;
    // return this.http.get<string>(apiUrl);
    this.foto = "data:image/png;base64,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"
    return of(this.foto);
  }

  actualizarAvatar(uid: string, avatar: string): Observable<string> {
    this.foto = avatar;
    return of(this.foto);
  }

  obtenerCorreos(uid:string): Observable<Array<Mail>> {
    let apiUrl = `${USUARIO_API_URL}/usuarios/${uid}/correos/`;
    return this.http.get<Array<Mail>>(apiUrl).pipe(map(datos => datos.map(d => new Mail(d))));
  }

  agregarCorreo(uid: string, correo: string): Observable<any>  {
    let apiUrl = `${USUARIO_API_URL}/usuarios/${uid}/correos/`;
    let data = {
      'email':correo
    }
    return this.http.post<any>(apiUrl, data);
  }

  confirmarCorreo(uid: string, cid: string, codigo: string):Observable<any> {
    let apiUrl = `${USUARIO_API_URL}/usuarios/${uid}/correos/${cid}/confirmar`;
    let data = {
      'codigo': codigo
    }
    return this.http.post<any>(apiUrl, data);
  }

  eliminarCorreo(uid: string, cid: string): Observable<string> {
    let apiUrl = `${USUARIO_API_URL}/usuarios/${uid}/correos/${cid}`;
    return this.http.delete<any>(apiUrl);
  }

  precondiciones():Observable<PrecondicionesData> {
    /*
      false => entonces tiene que redirigir al proceso para cargar el dato determinado
      true => la precondicion esta correcta, por lo que no redirige.
    */
   let apiUrl = `${USUARIO_API_URL}/precondiciones`;
   return this.http.get<PrecondicionesData>(apiUrl);
  }

}
